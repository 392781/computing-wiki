
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Dev Containers with VS Code</title>
  <link rel="icon" type="image/png" href="/assets/images/favicon.ico"/>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="vscode-setup"
                  title="Dev Containers with VS Code"
                  environment="web"
                  feedback-link="https://github.com/UCSB-PSTAT/computing/issues">
    
      <google-codelab-step label="Introduction" duration="0">
        <p>In this tutorial we will set up VS Code for use with development containers, show how to access them on a remote server, and set up and clone your first development container from GitHub.</p>
<h2 is-upgraded>Prereqs</h2>
<ul>
<li>Completion of SSH Setup (including GitHub)</li>
<li>Latest version of <a href="https://git-scm.com/downloads" target="_blank">Git</a></li>
<li>A <a href="https://github.com/" target="_blank">GitHub</a> account</li>
<li><a href="https://code.visualstudio.com/" target="_blank">VS Code</a> text editor</li>
</ul>
<h2 is-upgraded>Requirements for local </h2>
<ul>
<li>Latest version of <a href="https://www.docker.com/" target="_blank">Docker</a> (temp link)</li>
</ul>
<h2 is-upgraded>Requirements for remote</h2>
<ul>
<li>Setup of the <a href="https://www.it.ucsb.edu/ivanti-secure-access-campus-vpn/get-connected-campus-vpn" target="_blank">UCSB VPN</a> for connecting to PSTAT servers</li>
<li>SSH Setup (key generation and GitHub) on the remote server</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="VS Code Extensions" duration="0">
        <p>First, we need to install some necessary extensions on VS Code enable features for dev container and remote development management.  You will need the following extensions:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" target="_blank">Remote Development Pack</a> - SSH + Dev Containers</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-toolsai.jupyter" target="_blank">Jupyter</a> - Notebook support</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python" target="_blank">Python</a> - Intellisense, linting, debugging</li>
</ul>
<p>You can install these by following the links and clicking &#34;Install&#34; on your browser or you can look them up on VS Code Extension search (using <code>ctrl</code>/⌘ + <code>shift</code> + <code>x</code> shortcut).</p>


      </google-codelab-step>
    
      <google-codelab-step label="(Optional) Connect to remote server" duration="0">
        <p>If you are planning to run your code via a remote computing server (PSTAT Denali, NSF Jetstream, AWS, etc.), you will first need to connect to your remote server.  For more information about available computing servers, checkout <a href="https://computing.pstat.ucsb.edu/docs/computing#remote-computing-sources" target="_blank">this wiki entry</a>.  </p>
<p>With our VS Code extensions, remote connections are made simple:</p>
<ol type="1" start="1">
<li>Click on the <strong>bottom right button</strong> to &#34;Open a Remote Window&#34;.  This will launch the VS Code command palette for remote connections:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/26cd79b9436c34b7.png"></p>
<ol type="1" start="2">
<li>Select &#34;Connect Current Window to Host...&#34; option.</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/533429f7d28f6296.png"></p>
<ol type="1" start="3">
<li>From here select the host you wish to connect to.  If the remote host that you want to connect to does not appear in the options, use the &#34;Add New SSH Host...&#34; option and follow the prompts to set one up (More information about different server options can be found in the Remote Servers documentation entry).</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/dc0d2dd28be7cffd.png"></p>
<ol type="1" start="4">
<li>From here, VS Code will automatically connect to the host for you.  If this is your first time connecting to any remote server, it may take a few seconds for VS Code to install configurations in the background.  You may also be prompted about the type of operating system your server uses.  Please refer to your server&#39;s configuration for this information.  Once the set up is complete you will be greeted with a similar window:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/dce33962b35345b9.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Setting up the dev container template" duration="0">
        <p>Now that you have all the necessary extensions, let&#39;s set up your first development container.  We will do so using a template from which you can pick and choose the software that you will need for development.  The options include:</p>
<ul>
<li>R/Python languages</li>
<li>RStudio/JupyterLab support</li>
<li>Quatro support</li>
<li>VS Code extensions</li>
</ul>
<p>To create your own development container <a href="https://github.com/UCSB-PSTAT/devcontainer-template#ucsb-pstat-department-development-container-template" target="_blank">check out these steps</a>. We will follow along them here:</p>
<ol type="1" start="1">
<li>Click on the following link to <a href="https://mybinder.org/v2/gh/UCSB-PSTAT/devcontainer-template/HEAD?urlpath=terminals%2F1" target="_blank">begin a Binder session</a>.  This will launch a remote session inside your browser.  <strong>Be patient!  Startup can take up to 10 minutes!</strong>:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/10eaa72eb84deeb8.png"></p>
<ol type="1" start="2">
<li>Once set up, you should see the following terminal in your browser:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/4e082b882cd09e8b.png"></p>
<ol type="1" start="3">
<li>Run the following line in terminal (use <code>ctrl</code> + <code>shift</code> + <code>v</code> to paste into terminal):</li>
</ol>
<pre>copier copy gh:UCSB-PSTAT/devcontainer-template starter-code</pre>
<p class="image-container"><img style="width: 624.00px" src="img/c4603abd3dead787.png"></p>
<ol type="1" start="4">
<li>We can then view the generated files using this command  (use <code>ctrl</code> + <code>shift</code> + <code>v</code> to paste into terminal):</li>
</ol>
<pre>tree -a starter-code</pre>
<p class="image-container"><img style="width: 624.00px" src="img/1e996f0d70916b8.png"></p>
<p>Upon completing these steps you have 2 options within this Binder instance:</p>
<ul>
<li><strong>(Recommended) </strong><a href="https://github.com/UCSB-PSTAT/devcontainer-template#upload-to-github-repository" target="_blank">Create and add a GitHub repository with your development container files</a></li>
<li><a href="https://github.com/UCSB-PSTAT/devcontainer-template#download" target="_blank">Zip up and download your <code>.devcontainer</code> folder and add it to the root of your project directory</a></li>
</ul>
<aside class="special"><p>Your development container is ready to use!  If you downloaded the container file and added it manually, skip the next step!</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Cloning and running initial dev container" duration="0">
        <aside class="warning"><p><strong>Remote server users:</strong> If you&#39;re developing using a remote server, make sure that you have gone through the SSH Setup to generate a key on your remote server and add it to your GitHub.</p>
</aside>
<p>Now we are ready to clone and run an initial container setup from GitHub to use both locally and remotely.  </p>
<ol type="1" start="1">
<li>Using the sidebar, click on &#34;Source Control&#34; button (or using keyboard shortcut <code>ctrl</code>/⌘ + <code>shift</code> + <code>g</code>):</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/c98da8c47a0437f0.png"></p>
<ol type="1" start="2">
<li>Click on Clone Repository.  This will open a Command Palette with an option to provide a GitHub URL.  </li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/8c802cf4232071.png"></p>
<ol type="1" start="3">
<li>For an initial dev container setup use the repository you <a href="https://github.com/UCSB-PSTAT/devcontainer-template#upload-to-github-repository" target="_blank">created in the previous step</a>.  Click on &#34;Code&#34; then &#34;SSH&#34; and copy the link:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/473cba9ac1844092.png"></p>
<ol type="1" start="4">
<li>Select the &#34;Clone from GitHub&#34; option.  Allow the extension to sign in using GitHub.</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/7aae80fb13cfda05.png"></p>
<ol type="1" start="5">
<li>Once GitHub sign-in is complete, paste the GitHub link into the command palette:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/84797f74807e80b8.png"></p>
<ol type="1" start="6">
<li>You will be asked to choose a location to clone the repository into.  On a local machine this will open your file explorer.  On a remote server it will open another command palette with your current working directory.  Depending on how you wish to setup your directories, you may need to create additional folders as you see fit.</li>
<li>Once cloned, you will be prompted on whether you wish to open the cloned repository.  Select &#34;Open&#34;:</li>
</ol>
<p class="image-container"><img style="width: 347.20px" src="img/d0979e551d00da6c.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Conclusion" duration="0">
        <p>Once inside your development directory containing your <code>.devcontainer</code> folder you will have a dialogue box pop up to &#34;Reopen in Container&#34;.  Click this option and wait for the setup to complete.  This will take a little bit of time so hang tight!  You can press the &#34;Show log&#34; dialogue to track the progress.</p>
<p class="image-container"><img style="width: 610.00px" src="img/50e8c05f1e61dab3.png"></p>
<p class="image-container"><img style="width: 378.50px" src="img/90aa5ca561abe98d.png"></p>
<aside class="warning"><p><strong>Note:</strong> If you do not see the dialogue box above, open the command palette using <code>ctrl</code>/⌘ + <code>shift</code> + <code>p</code> or <code>F1</code> and type: &#34;Dev Containers: Rebuild and Reopen in Container&#34;.  Select this option and let the dev container build.</p>
</aside>
<aside class="special"><p>You are done!  You will be greeted with the following screen (Notice the &#34;Dev Container&#34; status on the bottom left):</p>
<p class="image-container"><img style="width: 610.00px" src="img/4945bb0f1fbd478e.png"></p>
</aside>
<h2 is-upgraded>Next Steps</h2>
<ul>
<li><a href="https://computing.pstat.ucsb.edu/docs/devcontainer#3-local-setup" target="_blank">Set up a local Docker installation for local development</a></li>
<li><a href="https://computing.pstat.ucsb.edu/docs/devcontainer#management" target="_blank">Learn to manage your containers</a></li>
<li><a href="https://computing.pstat.ucsb.edu/docs/devcontainer#additional-features" target="_blank">Learn more about custom setups</a></li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
  <script>
    // This is to override the close / done handling on the page
    // https://github.com/googlecodelabs/tools/issues/103
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById("arrow-back").href="/docs/devcontainer#initial-setup"; 
      document.getElementById("arrow-back").addEventListener( 'click', function() { 
        window.history.back();
      }); 
      document.getElementById("done").href="/docs/devcontainer#initial-setup"; 
      document.getElementById("done").addEventListener( 'click', function() { 
        window.history.back();
      }); 
    }, false);
  </script>
</body>
</html>
